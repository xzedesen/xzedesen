<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Signup | Xzedesen</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      height: 100vh; display: flex; justify-content: center; align-items: center;
      color: #fff; overflow: hidden; position: relative;
    }
    .bg-bubbles { position: absolute; top:0; left:0; width:100%; height:100%; z-index:-1; }
    .bg-bubbles li {
      position: absolute; list-style: none; display: block;
      width: 40px; height: 40px; background-color: rgba(255, 255, 255, 0.1);
      bottom: -160px; animation: square 15s infinite; transition-timing-function: linear; border-radius: 50%;
    }
    .bg-bubbles li:nth-child(1){left:10%;width:80px;height:80px;}
    .bg-bubbles li:nth-child(2){left:20%;animation-delay:1s;animation-duration:12s;width:60px;height:60px;}
    .bg-bubbles li:nth-child(3){left:25%;animation-delay:2s;width:70px;height:70px;}
    .bg-bubbles li:nth-child(4){left:40%;animation-duration:15s;width:90px;height:90px;}
    .bg-bubbles li:nth-child(5){left:70%;width:50px;height:50px;}
    .bg-bubbles li:nth-child(6){left:80%;animation-delay:2s;width:60px;height:60px;}
    .bg-bubbles li:nth-child(7){left:32%;animation-delay:4s;width:75px;height:75px;}
    .bg-bubbles li:nth-child(8){left:55%;animation-delay:8s;animation-duration:25s;width:100px;height:100px;}
    .bg-bubbles li:nth-child(9){left:25%;animation-delay:1s;animation-duration:25s;width:65px;height:65px;}
    .bg-bubbles li:nth-child(10){left:90%;animation-delay:7s;width:45px;height:45px;}
    @keyframes square {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; border-radius: 50%; }
      100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; border-radius: 20%; }
    }
    .login-container {
      background: rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px);
      border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      width: 100%; max-width: 450px; padding: 40px; text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1); animation: fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
    .logo { margin-bottom: 30px; animation: slideIn 0.6s ease-out; }
    @keyframes slideIn { from{opacity:0; transform:translateX(-30px);} to{opacity:1; transform:translateX(0);} }
    .logo h1 {
      font-size: 2.5rem; font-weight: 800;
      background: linear-gradient(45deg, #ff6b6b, #ff8e53, #ff6b6b);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 10px rgba(255, 107, 107, 0.3);
      letter-spacing: 2px; margin-bottom: 10px;
    }
    .logo .tagline { color: rgba(255,255,255,0.85); font-size: 1.1rem; }
    .form-group { margin-bottom: 20px; text-align: left; }
    .form-group label { display:block; margin-bottom:8px; font-weight:500; color:rgba(255,255,255,0.9); }
    .form-group input {
      width:100%; padding:14px; background:rgba(255,255,255,0.07);
      border:1px solid rgba(255,255,255,0.1); border-radius:10px; font-size:15px; color:#fff;
    }
    .form-group input::placeholder{ color:rgba(255,255,255,0.5); }
    .form-group input:focus {
      outline:none; background:rgba(255,255,255,0.1); border-color:rgba(255,107,107,0.6);
      box-shadow:0 0 0 3px rgba(255,107,107,0.2);
    }
    .login-btn {
      width:100%; padding:15px; background:linear-gradient(45deg,#ff6b6b,#ff8e53);
      border:none; border-radius:10px; color:white; font-size:17px; font-weight:600;
      cursor:pointer; transition:0.3s; margin-top:10px;
    }
    .login-btn:hover { transform:translateY(-3px); box-shadow:0 7px 20px rgba(255,107,107,0.6); }
    .signup-section { margin-top:20px; font-size:15px; color:rgba(255,255,255,0.7); }
    .signup-section a { color:#ff6b6b; font-weight:600; text-decoration:none; }
    .signup-section a:hover { text-decoration:underline; }
  </style>
</head>
<body>
  <ul class="bg-bubbles"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>
  <div class="login-container">
    <div class="logo">
      <h1>Signup</h1>
      <div class="tagline">Apply for Aadhaar-verified community</div>
    </div>

    <form id="signupForm">
      <div class="form-group">
        <label for="username">Choose Username</label>
        <input type="text" id="username" placeholder="yourname" required>
      </div>
      <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" placeholder="Enter your full name" required>
      </div>
      <div class="form-group">
        <label for="gender">Gender</label>
        <input type="text" id="gender" placeholder="Enter gender" required>
      </div>
      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" required>
      </div>
      <div class="form-group">
        <label for="location">Location</label>
        <input type="text" id="location" placeholder="Your city" required>
      </div>
      <div class="form-group">
        <label for="photo">Upload Photo</label>
        <input type="file" id="photo" accept="image/*" required>
      </div>
      <button type="submit" class="login-btn">Submit for Verification</button>
    </form>

    <div class="signup-section">
      <p>Already verified? <a href="index.html">Back to Login</a></p>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-storage.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDEBKGAsMF8woHBpOY5OK4isHGA_anAEPs",
      authDomain: "xzedesen-916ea.firebaseapp.com",
      projectId: "xzedesen-916ea",
      storageBucket: "xzedesen-916ea.appspot.com",
      messagingSenderId: "1019829731381",
      appId: "1:1019829731381:web:e987812821dd660578317c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const storage = getStorage(app);

    document.getElementById("signupForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      let username = document.getElementById("username").value.toLowerCase() + "@xzedesen.com";
      let name = document.getElementById("name").value;
      let gender = document.getElementById("gender").value;
      let dob = document.getElementById("dob").value;
      let location = document.getElementById("location").value;
      let file = document.getElementById("photo").files[0];

      if (!file) {
        alert("❌ Please upload a photo.");
        return;
      }

      try {
        // Upload photo
        const storageRef = ref(storage, "user_photos/" + username + ".jpg");
        await uploadBytes(storageRef, file);
        const photoURL = await getDownloadURL(storageRef);

        // Save user data
        await setDoc(doc(db, "users", username), {
          name, gender, dob, location,
          photoURL: photoURL,
          verified: false,
          createdAt: new Date().toISOString()
        });

        alert("✅ Details submitted with photo! Wait for admin approval.");
        document.getElementById("signupForm").reset();
      } catch (err) {
        alert("❌ Error: " + err.message);
      }
    });
  </script>
</body>
</html>
